<div class="title">
  Negotiations
</div>

<% @stocks.each do |stock| %>

  <div class="summary-subtitle">
    <%= link_to "#{treasury.name} (#{treasury.account_name})", summary_treasury_path(stock) %>
  </div>

  <table class="table table-hover">
    <thead>
      <tr>
        <th>Date</th>
        <th>Value</th>
        <th>Kind</th>
        <th>Shares</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% stock.negotiations.order('date desc').limit(5).each do |negotiation| %>
        <tr>
          <td><%= negotiation.date&.strftime('%B %d, %Y') %></td>
          <td><%= negotiation.value %></td>
          <td><%= link_to 'Edit', edit_negotiation_path(negotiation), :class => "btn btn-warning" %>
          <%= link_to 'Delete', stock_negotiation_path(stock_id: negotiation.stock.id, id: negotiation.id), method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<br>
<% end%>

<%= link_to 'Add negotiation', new_negotiation_path, class: 'btn btn-success ml-3'%>
