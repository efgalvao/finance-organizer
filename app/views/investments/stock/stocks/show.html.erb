<div class="stock-summary">
  <div class="title">
    <%= @stock.ticker %>
  </div>

  <div class="summary-item">
    Current amount of shares:<br />
    <div class="item-value">
      <%= @stock.shares_total %>
    </div>
  </div>

  <div class="summary-item green">
    Total amount invested:<br />
    <div class="item-value">
      <%= number_to_currency(@stock.invested_value_cents / 100.0, unit: 'R$', separator: ',', delimiter: '') %>
    </div>
  </div>

  <div class="summary-item">
    Average paid price:<br />
    <div class="item-value">
      <%= number_to_currency((@stock.average_aquisition_price), unit: 'R$', separator: ',', delimiter: '') %>
    </div>
  </div>

  <div class="summary-item">
    Current value per share:<br />
    <div class="item-value">
      <%= number_to_currency(@stock.current_value, unit: 'R$', separator: ',', delimiter: '') %>
    </div>
  </div>

  <div class="summary-item">
    Current total value:<br />
    <div class="item-value">
      <%= number_to_currency(@stock.current_total_value, unit: 'R$', separator: ',', delimiter: '') %>
    </div>
  </div>
</div>

<div>
  <%= link_to 'Register dividend', new_stock_dividend_path(@stock), class: 'btn btn-success' %>
  <%= link_to 'Add shares', new_stock_share_path(@stock), class: 'btn btn-success' %>
  <%= link_to 'Register new Price', new_stock_price_path(stock_id: @stock.id), class: 'btn btn-success' %>
  <%= link_to 'Get new Price', current_price_stock_path(@stock), class: 'btn btn-success' %>
</div>

<h3> Shares</h3>
<% if !@stock.shares.blank? %>
  <table class="table table-hover">
    <thead>
      <tr>
        <th> Aquisition Date </th>
        <th> Aquisition Value </th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% for share in @stock.shares.order('date desc').limit(5) %>
      <tr>
        <td> <%= share.date.strftime('%B %d, %Y') %> </td>
        <td> <%= (share.invested_cents.to_f / 100) %> </td>
      <% end %>
    </tbody>
  </table>
<% else %>
<h2> No shares for this Stock <h2>
<% end %>

<h3> Prices</h3>
<% if !@stock.prices.blank? %>
  <table class="table table-hover">
    <thead>
      <tr>
        <th> Date </th>
        <th> Value </th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% for price in @stock.prices.order('date desc').limit(5) %>
      <tr>
        <td> <%= price.date.strftime('%B %d, %Y') %> </td>
        <td> <%= (price.value_cents.to_d / 100) %> </td>
      <% end %>
    </tbody>
  </table>
<% else %>
<h2> No prices for this Stock <h2>
<% end %>

<h3> Dividends</h3>
<% if !@stock.dividends.blank? %>
  <table class="table table-hover">
    <thead>
      <tr>
        <th> Date </th>
        <th> Value </th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% for dividend in @stock.dividends.order('date desc').limit(5) %>
      <tr>
        <td> <%= dividend.date.strftime('%B %d, %Y') %> </td>
        <td> <%= (dividend.value_cents.to_f / 100) %> </td>
      <% end %>
    </tbody>
  </table>
<% else %>
<h2> No dividend for this Stock <h2>
<% end %>

<div class="buttons">
  <%= link_to 'Create share', new_stock_share_path(stock_id: @stock.id), class: "btn btn-success ml-3" %>
  <%= link_to 'Back', stocks_path, :class => "btn btn-primary ml-3" %>
</div>
