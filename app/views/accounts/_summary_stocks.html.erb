<div class="summary">
  <div class="summary-subtitle">
    Summary for <%= @account.name %> account:
  </div>
</di>

<div class="summary-item">
  Total amount of stocks:<br />
  <div class="item-value">
  <%= @account.stocks.size %>
  </div>
</div>

<div class="summary-item">
  Current total value:<br />
  <div class="item-value">
  <%= number_to_currency((@account.last_balance.balance + current_total_value(@account.id)), unit: 'R$', separator: ',', delimiter: '') %>
  </div>
</div>

<div class="summary-item">
   Total invested:<br />
  <div class="item-value">
  <%= number_to_currency(@account.total_invested, unit: 'R$', separator: ',', delimiter: '') %>
  </div>
</div>

<div class="chart-title">
  Stocks:
  </div>
<div class="summary-item">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>Shares</th>
        <th>Total Invested</th>
        <th>Current share value</th>
        <th>Current total amount</th>
      </tr>
    </thead>
    <tbody>
      <% @account.stocks.each do |stock| %>
        <tr>
          <td><%= stock.name %></td>
          <td><%= stock.shares.count %></td>
          <td><%= stock.total_invested %></td>
          <td><%= stock.individual_price %></td>
          <td><%= stock.updated_balance %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div>
  <%= link_to 'Transactions', account_transactions_path(@account), class:'btn btn-success' %>
</div>

<div class="chart-title">
  Dividends in the last 12 months:<br />
</div>
<div class="summary-chart">
  <%= line_chart @account.monthly_dividends_received, precision: 8 %>
</div>

<div class="chart-title">
  Monthly stocks value:
</div>

<div class="summary-chart">
  <%= line_chart @account.stocks.map { |stock| {
      name: stock.name, data: stock.monthly_price
      } }, precision: 8 %>
</div>

<div class="summary-stocks">
  <% @account.stocks.each do |stock| %>
    <div class="summary-stock">
      <%= link_to stock.name, stock_summary_path(stock), class:"summary-stock" %>
    </div>
  <% end %>
</div>
