<div class="title">
  <%= @user.name %>
</div>

<table class="table table-hover">
  <thead>
    <tr>
      <th><%= t('.total_balance') %></th>
      <th><%= t('.total_cash') %></th>
      <th><%= t('.total_stocks') %></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><%= number_to_currency(@user.total_amount, unit: 'R$ ', separator: ',', delimiter: '.') %></td>
      <td><%= number_to_currency(@user.total_balance, unit: 'R$ ', separator: ',', delimiter: '.') %></td>
      <td><%= number_to_currency(@user.total_in_stocks, unit: 'R$ ', separator: ',', delimiter: '.') %></td>
    </tr>
  </tbody>
</table>


<table class="table table-hover">
  <thead>
    <tr>
      <th><%= t('.account') %></th>
      <th><%= t('.balance') %></th>
      <th><%= t('.value_in_stocks') %></th>
      <th><%= t('.total') %></th>
    </tr>
  </thead>
  <tbody>
    <% @user.accounts.except_card_accounts.each do |account| %>
    <tr>
      <td><%= link_to account.name, account_path(account) %></td>
      <td><%= number_to_currency(account.balance, unit: 'R$ ', separator: ',', delimiter: '.') %></td>
      <td><%= number_to_currency(account.total_stock_value, unit: 'R$ ', separator: ',', delimiter: '.') %></td>
      <td><%= number_to_currency(account.stock_plus_balance, unit: 'R$ ', separator: ',', delimiter: '.') %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= render 'incomes_expenses' %>

<div class="chart-title">
  <%= t('.monthly_balance') %><br />
</div>
<div class="summary-chart">
 <%= line_chart [
      { name: 'Total', data: @user.semester_summary[:total] },
      { name: 'Savings', data: @user.semester_summary[:savings] },
      { name: 'Stocks', data: @user.semester_summary[:stocks] }
      ], precision: 8 %></div>

<div class="chart-title">
  <%= t('.monthly_dividends') %><br />
</div>
<div class="summary-chart">
  <%= line_chart @user.last_semester_total_dividends, precision: 8 %>
</div>
